/**
 * angular-growl-v2 - v0.7.1 - 2014-09-05
 * http://janstevens.github.io/angular-growl-2
 * Copyright (c) 2014 Marco Rinck,Jan Stevens; Licensed MIT
 */
angular.module("angular-growl",[]),angular.module("angular-growl").service("growlMessages",["growl, $sce, $timeout",function(a,b,c){"use strict";var d,e,f;this.init=function(b,c){d=[],this.limitMessages=c,e=a.onlyUnique(),f=b||0},this.addMessage=function(g){if(parseInt(f,10)===parseInt(g.referenceId,10)){var h,i;if(e&&(angular.forEach(d,function(a){i=b.getTrustedHtml(a.text),g.text===i&&g.severity===a.severity&&a.title===a.title&&(h=!0)}),h))return;if(g.text=b.trustAsHtml(String(g.text)),g.ttl&&-1!==g.ttl&&(g.countdown=g.ttl/1e3,g.promises=[],g.close=!1,g.countdownFunction=function(){g.countdown>1?(g.countdown--,g.promises.push(c(g.countdownFunction,1e3))):g.countdown--}),angular.isDefined(this.limitMessages)){var j=d.length-(this.limitMessages-1);j>0&&d.splice(this.limitMessages-1,j)}return a.reverseOrder()?d.unshift(g):d.push(g),"function"==typeof g.onopen&&g.onopen(),g.ttl&&-1!==g.ttl&&(g.promises.push(c(angular.bind(this,function(){this.deleteMessage(g)},g.ttl))),g.promises.push(c(g.countdownFunction,1e3))),g}},this.deleteMessage=function(a){var b=d.indexOf(a);b>-1&&d.splice(b,1),"function"==typeof a.onclose&&a.onclose()},this.stopTimeoutClose=function(a){angular.forEach(a.promises,function(a){c.cancel(a)}),a.close?this.deleteMessage(a):a.close=!0}}]),angular.module("angular-growl").directive("growl",[function(){"use strict";return{restrict:"A",templateUrl:"templates/growl/growl.html",replace:!1,scope:{reference:"@",inline:"@",limitMessages:"="},controller:["$scope","$timeout","growl","growlMessages",function(a,b,c,d){d.init(a.reference,a.inline),a.growlMessages=d,a.inlineMessage=a.inline||c.inlineMessages(),a.$watch("limitMessages",function(a){angular.isUndefined(a)||(d.limitMessages=a)}),a.alertClasses=function(a){return{"alert-success":"success"===a.severity,"alert-error":"error"===a.severity,"alert-danger":"error"===a.severity,"alert-info":"info"===a.severity,"alert-warning":"warning"===a.severity,icon:a.disableIcons===!1,"alert-dismissable":!a.disableCloseButton}},a.showCountDown=function(a){return!a.disableCountDown&&a.ttl>0},a.wrapperClasses=function(){var b={};return b["growl-fixed"]=!a.inlineMessage,b[c.position()]=!0,b},a.computeTitle=function(a){var b={success:"Success",error:"Error",info:"Information",warn:"Warning"};return b[a.severity]}}]}}]),angular.module("angular-growl").run(["$templateCache",function(a){"use strict";void 0===a.get("templates/growl/growl.html")&&a.put("templates/growl/growl.html",'<div class="growl-container" ng-class="wrapperClasses()"><div class="growl-item alert" ng-repeat="message in growlMessages.messages" ng-class="alertClasses(message)" ng-click="stopTimeoutClose(message)"><button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="growlMessages.deleteMessage(message)" ng-show="!message.disableCloseButton">&times;</button><button type="button" class="close" aria-hidden="true" ng-show="showCountDown(message)">{{message.countdown}}</button><h4 class="growl-title" ng-show="message.title" ng-bind="message.title"></h4><div class="growl-message" ng-bind-html="message.text"></div></div></div>')}]),angular.module("angular-growl").provider("growl",function(){"use strict";var a={success:null,error:null,warning:null,info:null},b="messages",c="text",d="title",e="severity",f=!0,g="variables",h=0,i=!1,j="top-right",k=!1,l=!1,m=!1,n=!1;this.globalTimeToLive=function(b){if("object"==typeof b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);else for(var d in a)a.hasOwnProperty(d)&&(a[d]=b)},this.globalDisableCloseButton=function(a){k=a},this.globalDisableIcons=function(a){l=a},this.globalReversedOrder=function(a){m=a},this.globalDisableCountDown=function(a){n=a},this.messageVariableKey=function(a){g=a},this.globalInlineMessages=function(a){i=a},this.globalPosition=function(a){j=a},this.messagesKey=function(a){b=a},this.messageTextKey=function(a){c=a},this.messageTitleKey=function(a){d=a},this.messageSeverityKey=function(a){e=a},this.onlyUniqueMessages=function(a){f=a},this.serverMessagesInterceptor=["$q","growl",function(a,c){function d(a){a.data[b]&&a.data[b].length>0&&c.addServerMessages(a.data[b])}return{response:function(a){return d(a),a},responseError:function(b){return d(b),a.reject(b)}}}],this.$get=["$rootScope","$interpolate","$filter","growlMessages",function(b,o,p,q){function r(a){if(C)a.text=C(a.text,a.variables);else{var c=o(a.text);a.text=c(a.variables)}var d=q.addMessage(a);return b.$broadcast("growlMessage",a),b.$apply(),d}function s(b,c,d){var e,f=c||{};return e={text:b,title:f.title,severity:d,ttl:f.ttl||a[d],variables:f.variables||{},disableCloseButton:void 0===f.disableCloseButton?k:f.disableCloseButton,disableIcons:void 0===f.disableIcons?l:f.disableIcons,disableCountDown:void 0===f.disableCountDown?n:f.disableCountDown,position:f.position||j,referenceId:f.referenceId||h,onclose:f.onclose,onopen:f.onopen},r(e)}function t(a,b){return s(a,b,"warning")}function u(a,b){return s(a,b,"error")}function v(a,b){return s(a,b,"info")}function w(a,b){return s(a,b,"success")}function x(a){var b,f,h,i;for(i=a.length,b=0;i>b;b++)if(f=a[b],f[c]){h=f[e]||"error";var j={};j.variables=f[g]||{},j.title=f[d],s(f[c],j,h)}}function y(){return f}function z(){return m}function A(){return i}function B(){return j}var C;try{C=p("translate")}catch(D){}return{warning:t,error:u,info:v,success:w,addServerMessages:x,onlyUnique:y,reverseOrder:z,inlineMessages:A,position:B}}]});